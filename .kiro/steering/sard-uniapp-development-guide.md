---
inclusion: always
---

# Sard Uniapp 开发指导规范

## 项目概述

Sard Uniapp 是一套基于 Uniapp + Vue3 框架开发的兼容多端的 UI 组件库，支持 H5、小程序和 APP 平台。项目采用 TypeScript 开发，提供完整的类型定义，支持按需引入、Tree Shaking、主题定制、国际化和暗黑模式。

## 核心技术栈

- **框架**: Uniapp + Vue3
- **语言**: TypeScript
- **构建工具**: Vite + sard-cli
- **样式**: SCSS + Tailwind CSS
- **测试**: Vitest
- **代码规范**: ESLint + Prettier
- **版本管理**: Git + Husky

## 项目结构规范

```
src/
├── lib/                    # 组件库核心代码
│   ├── components/         # 组件目录
│   ├── use/               # 组合式函数
│   ├── utils/             # 工具函数
│   ├── utilities/         # 样式工具
│   └── index.ts           # 主入口文件
├── pages/                 # 演示页面
│   ├── components/        # 组件演示页面
│   └── index/            # 首页
├── static/               # 静态资源
└── style/               # 全局样式
```

## 组件开发规范

### 1. 组件命名规范

- 组件名使用 kebab-case 格式（如：`action-sheet`、`datetime-picker`）
- 组件文件夹名与组件名保持一致
- Vue 组件文件名使用 kebab-case.vue 格式
- TypeScript 类型文件使用 kebab-case.ts 格式

### 2. 组件文件结构

每个组件应包含以下文件：

```
component-name/
├── component-name.vue     # 组件主文件
├── component-name.ts      # 类型定义和逻辑
├── index.ts              # 导出文件
├── README.md             # 组件文档
└── test/                 # 测试文件
    └── component-name.test.ts
```

### 3. 组件开发流程

1. 使用 `npm run nc` 创建新组件
2. 使用 `npm run nsc` 创建子组件
3. 编写组件代码和类型定义
4. 编写演示案例
5. 编写组件文档
6. 编写单元测试
7. 本地测试验证

### 4. 组件代码规范

- 使用 Vue3 Composition API
- 必须提供完整的 TypeScript 类型定义
- 组件 props 必须有默认值和类型验证
- 使用 `defineEmits` 定义事件
- 组件必须支持多端兼容（H5/小程序/APP）

## 样式开发规范

### 1. 样式架构

- 使用 SCSS 预处理器
- 支持 CSS 变量进行主题定制
- 使用 BEM 命名规范
- 支持暗黑模式切换

### 2. 样式命名规范

- 组件样式类名以 `sar-` 为前缀
- 使用 BEM 命名：`.sar-component__element--modifier`
- CSS 变量使用 `--sar-` 前缀

### 3. 响应式设计

- 优先使用相对单位（rpx、%、vw/vh）
- 考虑不同屏幕尺寸的适配
- 确保在各平台下的一致性表现

## 代码质量规范

### 1. TypeScript 规范

- 严格模式开发，启用所有严格检查
- 为所有公共 API 提供类型定义
- 避免使用 `any` 类型
- 使用接口定义复杂对象类型

### 2. 代码格式规范

- 使用 ESLint 进行代码检查
- 使用 Prettier 进行代码格式化
- 提交前自动运行 lint 和格式化
- 遵循项目的 ESLint 配置规则

### 3. 测试规范

- 单元测试覆盖率要求超过 80%
- 为每个组件编写测试用例
- 测试组件的基本功能和边界情况
- 使用 Vitest 进行测试

## 文档编写规范

### 1. 组件文档结构

```markdown
# 组件名称

## 介绍

组件的基本介绍和使用场景

## 引入

组件的引入方式

## 代码演示

### 基础用法

### 高级用法

## API

### Props

### Events

### Slots

### 方法

## 主题定制

CSS 变量列表

## 常见问题
```

### 2. 代码示例规范

- 提供完整可运行的代码示例
- 示例代码要简洁明了
- 包含常用场景和高级用法
- 代码注释要清晰

## 版本管理规范

### 1. Git 提交规范

使用 Conventional Commits 规范：

- `feat`: 新功能
- `fix`: 修复问题
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 2. 版本发布流程

1. 修复问题或添加功能
2. 运行测试 `npm run test`
3. 更新版本号
4. 提交代码 `git commit -m 'feat: 新功能描述'`
5. 打标签 `npm run tag`
6. 生成 changelog `npm run changelog`
7. 构建组件库 `npm run build`
8. 发布到 npm `npm run release`
9. 推送代码和标签 `npm run push`

## 多端兼容性规范

### 1. 平台支持

- H5: 现代浏览器支持
- 小程序: 微信、支付宝等主流小程序
- APP: 不支持 nvue 和 uvue

### 2. 兼容性注意事项

- 避免使用平台特有的 API
- 使用条件编译处理平台差异
- 测试各平台的表现一致性
- 注意小程序的限制和特殊性

## 性能优化规范

### 1. 组件性能

- 合理使用 Vue3 的响应式特性
- 避免不必要的重新渲染
- 使用 `v-memo` 优化列表渲染
- 合理使用 `computed` 和 `watch`

### 2. 包体积优化

- 支持按需引入
- 支持 Tree Shaking
- 避免引入大型第三方库
- 优化图片和静态资源

## 国际化规范

### 1. 文本处理

- 所有用户可见文本支持国际化
- 使用 vue-i18n 进行国际化处理
- 提供中英文语言包
- 支持动态语言切换

### 2. 日期和数字格式

- 考虑不同地区的日期格式
- 支持不同的数字格式化规则
- 时区处理要准确

## 无障碍访问规范

### 1. 语义化标签

- 使用正确的 HTML 语义化标签
- 提供适当的 ARIA 属性
- 确保键盘导航的可用性

### 2. 视觉设计

- 确保足够的颜色对比度
- 支持屏幕阅读器
- 提供焦点指示器

## 安全规范

### 1. 输入验证

- 对用户输入进行验证和清理
- 防止 XSS 攻击
- 避免直接使用 `v-html`

### 2. 依赖管理

- 定期更新依赖包
- 检查安全漏洞
- 避免使用有安全问题的包

## 开发工具配置

### 1. 推荐编辑器

- 使用 VSCode 进行开发
- 安装推荐的扩展插件
- 配置统一的编辑器设置

### 2. 开发环境

- Node.js >= 20
- 使用 pnpm 作为包管理器
- 配置合适的开发工具链

## 社区贡献规范

### 1. Issue 处理

- 及时响应用户问题
- 提供详细的问题解决方案
- 维护 Issue 标签和状态

### 2. PR 审查

- 代码审查要仔细
- 确保符合项目规范
- 测试新功能的稳定性

### 3. 交流语言

- 使用中文注释和文档
- 讨论和交流时使用中文
- AI 助手使用中文进行交流

这些规范旨在确保 Sard Uniapp 项目的代码质量、一致性和可维护性。所有开发者都应遵循这些规范进行开发。
